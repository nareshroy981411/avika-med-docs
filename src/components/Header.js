// Header.js

import React from "react";
import AppBar from "@mui/material/AppBar";
import Box from "@mui/material/Box";
import Toolbar from "@mui/material/Toolbar";
import IconButton from "@mui/material/IconButton";
import Typography from "@mui/material/Typography";
import Menu from "@mui/material/Menu";
import MenuIcon from "@mui/icons-material/Menu";
import Container from "@mui/material/Container";
import Avatar from "@mui/material/Avatar";
import Button from "@mui/material/Button";
import Tooltip from "@mui/material/Tooltip";
import MenuItem from "@mui/material/MenuItem";
import AdbIcon from "@mui/icons-material/Adb";
import AccountCircleIcon from "../Logos/user (1).png";
import logo from "../assets/logo-no-background.png";
import { Link, useNavigate } from "react-router-dom";
import { useDispatch, useSelector } from "react-redux";

const pages = ["Home"];

function Headers() {
  const [anchorElNav, setAnchorElNav] = React.useState(null);
  const [anchorElUser, setAnchorElUser] = React.useState(null);
  const navigate = useNavigate();
  const username = useSelector(
    (state) => state.authReducer?.loginData?.data?.user[0]?.username
  );

  const handleOpenNavMenu = (event) => {
    setAnchorElNav(event?.currentTarget);
  };
  const handleOpenUserMenu = (event) => {
    setAnchorElUser(event?.currentTarget);
  };

  const handleCloseNavMenu = () => {
    setAnchorElNav(null);
  };

  const handleCloseUserMenu = () => {
    setAnchorElUser(null);
  };

  const logoutHandle = () => {
    sessionStorage?.removeItem("token");
    navigate("/");
  };

  return (
    <AppBar position="fixed" sx={{ backgroundColor: "#FFFFfF", zIndex: 1000 }}> {/* Add zIndex */}
      <Container maxWidth="xl">
        <Toolbar disableGutters>
          <Link to="/dashboard" style={{ textDecoration: "none", textAlign:"center" }}>
            <svg style={{marginBottom:"13px"}} width="84" height="50" viewBox="0 0 815 316" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M341.858 153.516C341.053 149.457 340.121 145.673 339.572 141.833C339.079 138.488 340.541 135.654 342.808 133.259C344.984 130.974 347.269 128.78 349.445 126.495C351.876 123.935 353.101 120.937 352.114 117.39C351.035 113.533 347.233 112.143 343.869 114.319C343.028 114.867 342.26 115.562 341.51 116.238C338.347 119.072 334.837 120.37 330.468 119.639C323.978 118.524 319.316 120.973 316.061 126.805C314.983 128.743 313.593 130.261 311.016 130.974C312.917 126.732 313.484 122.271 316.189 118.615C318.95 114.867 322.844 113.039 327.122 111.759C329.17 111.156 331.254 110.589 333.174 109.675C336.958 107.865 339.17 104.757 339.664 100.552C340.011 97.7002 337.689 95.4332 334.837 95.7988C333.631 95.9634 332.442 96.3656 331.272 96.7129C325.532 98.4497 320.303 97.3528 315.751 93.6049C312.789 91.1734 309.937 91.1917 306.683 92.7822C304.16 94.0072 301.545 95.0492 298.913 96.0548C298.273 96.2924 297.468 96.0913 296.627 96.0913C299.388 93.3307 301.948 90.6067 304.708 88.102C307.78 85.3231 311.601 85.1951 315.476 85.6705C318.603 86.0544 321.692 86.7126 324.837 86.8954C328.841 87.133 332.424 85.7802 335.404 83.0378C336.812 81.7581 337.909 80.2224 337.47 78.2662C337.013 76.1272 335.239 75.2313 333.302 74.7194C332.369 74.4818 331.418 74.3538 330.468 74.171C326.519 73.3483 323.612 71.0081 321.455 67.699C320.285 65.9074 319.206 64.0609 318.054 62.2692C316.701 60.1668 314.745 59.1247 312.24 59.2344C309.736 59.3441 307.213 59.5635 304.708 59.6183C302.77 59.6549 300.905 59.3624 299.479 57.9546C302.752 56.7846 305.915 55.5597 309.169 54.5359C314.416 52.8722 319.078 54.4993 323.429 57.4244C326.135 59.2527 328.786 61.154 331.583 62.8543C334.837 64.8287 338.384 65.2309 342.114 64.4082C346.227 63.4941 347.745 59.2344 345.002 56.0167C344.618 55.5779 344.198 55.1392 343.722 54.8101C339.517 51.9581 337.616 47.7897 336.903 42.9266C336.684 41.3909 336.592 39.837 336.483 38.283C336.227 34.919 334.746 32.4327 331.546 30.9884C329.005 29.8366 326.555 28.5385 324.087 27.2405C322.424 26.363 321.052 25.1198 320.303 23.4195C323.063 23.9863 325.788 24.6079 328.53 25.0832C330.157 25.3757 331.857 25.3209 333.466 25.65C339.316 26.8566 342.735 30.8604 345.039 36.0342C346.099 38.4292 346.922 40.9156 348 43.3106C349.701 47.0584 352.26 49.8373 356.575 50.4955C359.116 50.8794 361.365 50.3492 363.065 48.2833C364.747 46.254 364.454 44.115 363.613 41.7931C362.791 39.5079 361.95 37.1312 361.785 34.7545C361.657 32.9628 362.224 30.8787 363.12 29.2698C367.069 22.2677 366.338 15.6496 361.986 9.19596C360.871 7.53227 359.701 5.88687 358.549 4.24147L358.97 3.76614C361.365 5.46638 363.906 6.98381 366.155 8.88516C369.811 11.9749 372.828 15.6313 373.449 20.5858C373.669 22.3957 373.541 24.3702 373.065 26.1253C371.475 31.9756 372.663 37.1495 376.393 41.7931C377.654 43.3654 379.098 44.828 380.561 46.254C381.676 47.3509 383.084 47.7349 384.565 47.0584C385.954 46.4185 386.265 45.1571 386.32 43.7311C386.448 39.6724 388.496 36.601 391.311 33.8221C393.706 31.4637 395.936 28.9225 398.149 26.363C400.141 24.0594 401.019 21.2805 401.092 18.2274C401.11 17.3498 401.366 16.4174 401.75 15.6313C403.121 12.889 403.103 10.2198 401.842 7.45914C400.708 4.99104 400.909 2.61436 402.957 0C402.957 3.32736 405.114 5.11902 406.467 7.34945C407.217 8.59264 407.619 10.2563 407.619 11.7189C407.6 14.5892 407.838 17.3498 408.716 20.0922C409.666 23.0173 408.935 25.8145 407.345 28.374C405.882 30.7324 404.237 32.9994 402.865 35.4127C400.818 39.0325 399.776 42.9084 400.434 47.1316C401.165 51.7935 404.986 53.4572 408.752 50.6235C410.069 49.6362 411.257 48.4479 412.299 47.1681C414.95 43.8773 418.277 41.7749 422.5 41.4092C429.32 40.8242 433.269 37.0763 435.06 30.6593C435.664 28.502 436.486 26.3995 437.254 24.2971C437.858 22.6517 439.156 21.9935 440.527 21.829C439.85 24.6261 439.028 27.3685 438.534 30.1657C438.187 32.2133 438.479 34.3523 438.132 36.3999C437.108 42.3965 433.506 46.6379 428.442 49.7093C425.974 51.2085 423.323 52.4151 420.946 54.0239C417.966 56.035 415.535 58.6311 414.438 62.1413C414.054 63.3662 413.871 64.847 414.182 66.0536C415.06 69.4359 418.533 70.4048 422.171 68.3572C424.804 66.8764 427.418 65.4869 430.508 65.2492C433.25 65.0298 435.846 65.56 438.296 66.7301C443.324 69.1433 447.894 68.6497 452.081 64.8287C453.745 63.3113 455.683 62.3424 458.297 62.3424C457.858 62.836 457.566 63.1468 457.273 63.4759C455.445 65.56 453.489 67.5711 451.807 69.7649C448.315 74.3172 443.763 76.1272 438.15 75.4873C434.731 75.1033 431.349 74.9754 427.93 75.7432C423.122 76.8219 419.009 80.9171 418.222 85.5791C417.656 88.943 419.722 91.6853 423.159 91.8864C424.804 91.9778 426.486 91.8316 428.095 91.5208C432.537 90.6615 436.23 91.923 438.9 95.5063C442.062 99.7478 446.085 101.156 451.149 100.022C451.862 99.8575 452.648 100.022 453.69 100.059C449.96 101.631 446.688 103.221 443.269 104.428C439.448 105.781 435.81 104.903 432.336 102.911C430.033 101.594 427.674 100.278 425.188 99.3821C422.592 98.4497 419.886 98.9068 417.327 99.9123C414.164 101.156 413.085 104.044 414.566 107.116C415.645 109.364 417.327 111.064 419.466 112.271C423.086 114.337 425.261 117.427 426.175 121.43C427.016 125.178 429.338 127.372 433.031 128.25C435.225 128.78 437.309 129.53 438.9 131.358C435.06 131.138 431.313 131.102 427.583 130.663C423.853 130.243 420.91 128.14 418.57 125.288C417.125 123.515 415.901 121.558 414.529 119.712C412.153 116.494 409.118 114.374 404.95 115.233C403.341 115.562 401.75 116.659 400.452 117.774C399.063 118.962 399.191 121.229 400.379 123.112C400.891 123.917 401.549 124.648 402.152 125.398C404.822 128.652 405.48 132.199 403.999 136.184C401.823 142.035 402.317 143.643 407.015 147.995C408.35 149.238 409.447 150.7 410.672 152.071C410.544 152.218 410.398 152.364 410.27 152.492C409.922 152.346 409.538 152.218 409.209 152.017C407.143 150.883 405.132 149.658 403.012 148.634C398.514 146.441 395.973 142.894 395.15 137.994C394.657 135.032 394.145 132.089 393.45 129.182C392.902 126.897 391.073 121.376 377.672 118.853C376.265 118.524 374.82 118.414 373.394 118.158C360.359 115.909 350.724 105.726 348.64 92.6543C346.465 79.0523 354.856 66.7118 367.38 62.4521C380.598 57.9729 394.931 64.0609 400.69 76.5842C404.419 84.6649 402.646 94.1351 396.284 100.241C389.556 106.695 380.488 108.304 372.773 104.263C367.361 101.43 363.613 97.2066 362.809 90.9358C361.694 82.3065 367.27 75.0668 375.881 73.915C383.157 72.946 391.476 78.8146 389.629 87.6998C388.715 92.0692 384.565 95.36 380.47 94.7202C378.459 94.4094 376.832 93.4221 375.826 91.6305C374.583 89.4549 375.881 87.2976 378.367 87.389C382.28 87.5535 382.938 85.8899 382.865 83.8605C382.81 82.0689 381.292 80.6246 379.318 80.2406C373.906 79.1986 368.678 83.8605 369.098 89.3635C369.573 95.5429 374.674 100.351 381.183 100.698C390.763 101.229 396.96 94.3728 395.918 84.2993C395.297 78.2479 392.225 73.787 386.832 70.9716C381.53 68.211 375.917 67.1323 370.049 68.6314C360.761 70.9899 356.794 78.9792 356.483 86.6211C356.045 97.2614 363.577 108.596 373.486 111.924C383.907 115.416 393.304 113.258 401.458 105.817C407.655 100.168 411.239 93.2027 411.165 84.7564C411.092 75.8895 407.6 68.4121 400.781 62.6532C393.998 56.9125 386.174 53.7314 377.215 54.0057C370.195 54.2068 363.815 56.5835 358.037 60.5324C353.339 63.7501 349.28 67.5711 346.483 72.5987C342.132 80.4052 342.461 88.4677 345.24 96.6764C347.47 103.258 350.999 109.053 355.624 114.209C357.251 116.037 358.933 117.884 360.286 119.913C362.699 123.551 362.334 127.153 359.043 129.987C356.758 131.961 354.18 133.734 351.474 135.032C346.611 137.373 344.088 140.901 344.051 146.349C344.051 148.762 343.905 151.304 341.967 153.479L341.858 153.516Z" fill="#FAA61A" />
              <path d="M98.6508 275.318V266.543C88.0106 283.819 70.2037 288.884 51.8484 288.884C22.3409 288.884 0 273.453 0 245.28C0 217.108 25.522 200.087 57.9729 200.087C72.8546 200.087 84.2993 202.482 98.1207 206.742C98.1207 180.689 85.0854 169.775 61.9584 169.775C51.5924 169.775 41.2264 172.17 31.6465 175.351C23.4012 178.002 14.9 174.821 13.0352 165.771L11.4447 157.8C17.8252 154.345 38.027 145.039 64.3534 145.039C107.17 145.039 125.782 168.44 125.782 206.467V286.763H110.351C102.911 286.763 98.6508 281.973 98.6508 275.336V275.318ZM59.3075 267.073C74.7377 267.073 98.1207 258.041 98.1207 233.58V225.865C86.1458 221.605 77.1144 219.484 63.549 219.484C40.1477 219.484 27.661 229.85 27.661 243.946C27.661 259.906 43.8773 267.073 59.3075 267.073Z" fill="#4A8ECC" />
              <path d="M203.684 159.685L239.316 238.115L274.673 159.41C278.129 151.969 284.784 147.984 292.224 147.984H312.426L243.557 286.783H234.526L165.931 147.984H185.877C193.592 147.984 200.228 152.244 203.684 159.685Z" fill="#4A8ECC" />
              <path d="M364.806 272.943V147.984H378.628C386.599 147.984 392.449 153.834 392.449 161.805V286.764H378.628C370.657 286.764 364.806 280.914 364.806 272.943Z" fill="#4A8ECC" />
              <path d="M490.038 105.447V209.948L539.236 155.705C543.495 150.659 549.602 147.99 555.982 147.99H580.17L518.741 216.055L585.215 286.789H560.224C553.843 286.789 547.993 284.394 543.733 279.348L490.02 222.453V272.967C490.02 280.938 484.17 286.789 476.199 286.789H462.103V91.6259H476.199C484.17 91.6259 490.02 97.4762 490.02 105.447H490.038Z" fill="#4A8ECC" />
              <path d="M717.628 275.318V266.543C706.988 283.819 689.181 288.884 670.826 288.884C641.318 288.884 618.977 273.453 618.977 245.28C618.977 217.108 644.499 200.087 676.95 200.087C691.832 200.087 703.277 202.482 717.098 206.742C717.098 180.689 704.063 169.775 680.936 169.775C670.57 169.775 660.204 172.17 650.624 175.351C642.379 178.002 633.877 174.821 632.013 165.771L630.422 157.8C636.802 154.345 657.004 145.039 683.331 145.039C726.148 145.039 744.759 168.44 744.759 206.467V286.763H729.329C721.888 286.763 717.628 281.973 717.628 275.336V275.318ZM678.285 267.073C693.697 267.073 717.098 258.041 717.098 233.58V225.865C705.123 221.605 696.092 219.484 682.526 219.484C659.125 219.484 646.638 229.85 646.638 243.946C646.638 259.906 662.855 267.073 678.285 267.073Z" fill="#4A8ECC" />
            </svg>
          </Link>
          <Box sx={{ flexGrow: 1, display: { xs: "flex", md: "none" } }}>
            <IconButton
              size="large"
              aria-label="account of current user"
              aria-controls="menu-appbar"
              aria-haspopup="true"
              onClick={handleOpenNavMenu}
              color="inherit"
            >
              <MenuIcon />
            </IconButton>
            <Menu
              id="menu-appbar"
              anchorEl={anchorElNav}
              anchorOrigin={{
                vertical: "bottom",
                horizontal: "left",
              }}
              keepMounted
              transformOrigin={{
                vertical: "top",
                horizontal: "left",
              }}
              open={Boolean(anchorElNav)}
              onClose={handleCloseNavMenu}
              sx={{
                display: { xs: "block", md: "none" },
              }}
            >
              {/* {pages.map((page) => (
                <MenuItem key={page} onClick={handleCloseNavMenu}>
                  <Typography textAlign="center">{page}</Typography>
                </MenuItem>
              ))} */}
            </Menu>
          </Box>
          <AdbIcon sx={{ display: { xs: "flex", md: "none" }, mr: 1 }} />
          <Typography
            variant="h5"
            noWrap
            component="a"
            sx={{
              mr: 2,
              display: { xs: "flex", md: "none" },
              flexGrow: 1,
              fontFamily: "monospace",
              fontWeight: 700,
              letterSpacing: ".3rem",
              color: "inherit",
              textDecoration: "none",
            }}
          ></Typography>
          <Box
            sx={{ flexGrow: 1, display: { xs: "none", md: "flex" } }}
            onClick={() => navigate("/dashboard")}
          >
            {/* {pages.map((page) => (
              <Button
                key={page}
                onClick={handleCloseNavMenu}
                sx={{ my: 2, color: "white", display: "block" }}
              >
                {page}
              </Button>
            ))} */}
          </Box>

          <Box sx={{ flexGrow: 0 }}>
            <Tooltip title="Open settings">
              <IconButton onClick={handleOpenUserMenu} sx={{ p: 0 }}>
                <Avatar alt="Remy Sharp" src={AccountCircleIcon} />
              </IconButton>
            </Tooltip>
            <Menu
              sx={{ mt: "45px" }}
              id="menu-appbar"
              anchorEl={anchorElUser}
              anchorOrigin={{
                vertical: "top",
                horizontal: "right",
              }}
              keepMounted
              transformOrigin={{
                vertical: "top",
                horizontal: "right",
              }}
              open={Boolean(anchorElUser)}
              onClose={handleCloseUserMenu}
            >
              <MenuItem onClick={handleCloseUserMenu}>
                <Typography textAlign="center">{username}</Typography>
              </MenuItem>
              <MenuItem onClick={handleCloseUserMenu}>
                <Typography textAlign="center" onClick={logoutHandle}>
                  Logout
                </Typography>
              </MenuItem>
            </Menu>
          </Box>
        </Toolbar>
      </Container>
    </AppBar>
  );
}
export default Headers;
